{% extends 'layout.html' %}
{% block title %}Crear Examen{% endblock %}
{% block content %}
<div class="dashboard-header">
  <h2>‚ûï Crear Nuevo Examen</h2>
  <p class="welcome">Configura tu examen estilo ICFES con opciones avanzadas</p>
</div>

<div class="action-bar">
  <a href="{{ url_for('profesor.lista_examenes') }}" class="btn btn-secondary">‚Üê Volver a Ex√°menes</a>
</div>

<div class="form-container">
  <form method="post" class="form-horizontal">
    
    <!-- Informaci√≥n B√°sica -->
    <fieldset>
      <legend>üìã Informaci√≥n B√°sica</legend>
      
      <div class="input-group">
        <label for="titulo">T√≠tulo del Examen *</label>
        <input id="titulo" name="titulo" type="text" placeholder="Ej: Examen Final de Matem√°ticas" required />
      </div>
      
      <div class="input-group">
        <label for="descripcion">Descripci√≥n</label>
        <textarea id="descripcion" name="descripcion" rows="3" 
                  placeholder="Describe el contenido y objetivos del examen..."></textarea>
      </div>
      
      <div class="input-group">
        <label for="categoria_id">Categor√≠a</label>
        <select id="categoria_id" name="categoria_id">
          <option value="">Sin categor√≠a</option>
          {% for cat in categorias %}
            <option value="{{ cat.id }}">{{ cat.icono }} {{ cat.nombre }}</option>
          {% endfor %}
        </select>
        <small>Selecciona el √°rea de conocimiento del examen</small>
      </div>
    </fieldset>
    
    <!-- Configuraci√≥n de Tiempo -->
    <fieldset>
      <legend>‚è±Ô∏è Configuraci√≥n de Tiempo</legend>
      
      <div class="form-row">
        <div class="input-group">
          <label for="duracion_minutos">Duraci√≥n (minutos)</label>
          <input id="duracion_minutos" name="duracion_minutos" type="number" min="5" value="60" />
          <small>Tiempo m√°ximo para completar el examen</small>
        </div>
        
        <div class="input-group">
          <label for="fecha_limite">Fecha L√≠mite</label>
          <input id="fecha_limite" name="fecha_limite" type="datetime-local" />
          <small>Fecha y hora l√≠mite para presentar</small>
        </div>
      </div>
    </fieldset>
    
    <!-- Configuraciones Avanzadas -->
    <fieldset class="configuraciones-avanzadas">
      <legend>‚öôÔ∏è Configuraciones Avanzadas</legend>
      
      <div class="form-row">
        <div class="input-group">
          <label for="intentos_maximos">Intentos M√°ximos</label>
          <input id="intentos_maximos" name="intentos_maximos" type="number" min="1" value="1" />
          <small>N√∫mero de veces que puede presentarse</small>
        </div>
        
        <div class="input-group">
          <label for="calificacion_minima">Calificaci√≥n M√≠nima (%)</label>
          <input id="calificacion_minima" name="calificacion_minima" type="number" 
                 min="0" max="100" step="0.1" value="60" />
          <small>Porcentaje m√≠nimo para aprobar</small>
        </div>
      </div>
      
      <div class="checkbox-group">
        <label class="checkbox-label">
          <input type="checkbox" name="mostrar_respuestas" checked />
          <span>Mostrar respuestas correctas despu√©s de completar</span>
        </label>
        
        <label class="checkbox-label">
          <input type="checkbox" name="barajar_preguntas" />
          <span>Barajar orden de preguntas (aleatorio para cada estudiante)</span>
        </label>
        
        <label class="checkbox-label">
          <input type="checkbox" name="publicado" />
          <span>Publicar examen inmediatamente (visible para estudiantes asignados)</span>
        </label>
      </div>
    </fieldset>
    
    <div class="form-actions">
      <button type="submit" class="btn btn-primary">‚úÖ Crear Examen y Agregar Preguntas</button>
      <a href="{{ url_for('profesor.lista_examenes') }}" class="btn btn-secondary">Cancelar</a>
    </div>
  </form>
</div>

<style>
  fieldset {
    border: 1px solid #ddd;
    border-radius: 8px;
    padding: 20px;
    margin-bottom: 20px;
    background: #f9f9f9;
  }
  
  fieldset legend {
    font-weight: 600;
    color: #00695c;
    padding: 0 10px;
    font-size: 1.1em;
  }
  
  .form-row {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 20px;
  }
  
  @media (max-width: 768px) {
    .form-row {
      grid-template-columns: 1fr;
    }
  }
  
  .checkbox-group {
    display: flex;
    flex-direction: column;
    gap: 12px;
    margin-top: 10px;
  }
  
  .checkbox-label {
    display: flex;
    align-items: center;
    gap: 10px;
    cursor: pointer;
    padding: 10px;
    border-radius: 4px;
    transition: background 0.2s;
  }
  
  .checkbox-label:hover {
    background: #e0f2f1;
  }
  
  .checkbox-label input[type="checkbox"] {
    width: auto;
    cursor: pointer;
  }
  
  .checkbox-label span {
    flex: 1;
  }
  
  small {
    display: block;
    color: #666;
    font-size: 0.85em;
    margin-top: 4px;
  }
</style>
{% endblock %}
